## Project Overview

This is a Preact application built with Vite, using TypeScript. It features a simple counter component and is configured for testing with Vitest and deployment to GitHub Pages.

## Architecture

- **Main Component**: `src/app.tsx` - The App component with state management using Preact hooks (e.g., `useState` for counter).
- **Entry Point**: `src/main.tsx` - Renders the App component to the DOM element with id 'app'.
- **Assets**: `src/assets/` - Static assets like SVG logos imported in components.
- **Build Output**: `dist/` - Generated by Vite build, served from this directory.
- **Base URL**: Dynamically set in `vite.config.ts` using `process.env.GITHUB_REPOSITORY` to support GitHub Pages subpaths (e.g., `/${repo-name}/` in CI, `/` locally).

## Key Workflows

- **Development**: `npm run dev` starts Vite dev server with hot module replacement (HMR) for fast iteration.
- **Build**: `npm run build` runs TypeScript compilation (`tsc -b`) followed by Vite bundling.
- **Test**: `npm run test` executes Vitest tests once (non-watch mode), generating JUnit XML report at `junit.xml`.
- **Preview**: `npm run preview` serves the built app locally for verification.
- **CI/CD**: GitHub Actions pipeline with sequential jobs: 'test' (runs tests and uploads JUnit), 'build' (depends on test, builds and uploads dist), 'deploy' (depends on build, publishes to Pages).

## Conventions

- **Testing**: Place tests in `src/__tests__/`, use `@testing-library/preact` for component testing with jsdom environment. Example: `src/__tests__/App.test.tsx` checks for "Vite + Preact" text.
- **Configuration**: Separate `vitest.config.ts` for test settings (globals, environment, JUnit reporter).
- **Base Path Handling**: Always check `process.env.GITHUB_REPOSITORY` for dynamic base to ensure correct asset paths in Pages deployment.
- **Artifacts**: Test results saved as `junit.xml` artifact, build as `dist/` artifact for deployment.

## Dependencies & Integrations

- **Preact**: Used for lightweight component rendering with hooks.
- **Vite**: Handles bundling, dev server, and build; configured with Preact preset.
- **Vitest**: Integrated testing with JUnit output for CI reporting.
- **GitHub Pages**: Deployment target; workflow uses actions for Pages setup and upload.

## Modern Folder Structure Proposal

To improve scalability, maintainability, and developer experience, we propose the following modern folder structure for the `src/` directory. This structure follows feature-based organization, separates concerns, and aligns with TypeScript and Preact best practices.

```
src/
├── components/           # Reusable UI components
│   ├── common/          # Generic components (buttons, inputs, etc.)
│   ├── layout/          # Layout-specific components (header, footer, sidebar)
│   └── ui/              # UI-specific components (cards, modals, etc.)
├── pages/               # Page-level components (route-based views)
├── hooks/               # Custom React hooks
├── utils/               # Utility functions and helpers
├── types/               # TypeScript type definitions and interfaces
├── styles/              # Global styles, themes, and CSS variables
│   ├── base/            # Base styles (reset, typography, colors)
│   ├── components/      # Component-specific styles
│   └── themes/          # Theme configurations
├── assets/              # Static assets (images, icons, fonts)
├── lib/                 # External library configurations and wrappers
├── __tests__/           # Test files (mirroring src structure)
├── App.tsx              # Main application component
├── main.tsx             # Application entry point
└── index.ts             # Barrel exports for clean imports
```

### Structure Guidelines

- **Feature-based organization**: Group related files by feature rather than type (e.g., `components/auth/` instead of `components/LoginButton.tsx` scattered across types).
- **Barrel exports**: Use `index.ts` files in each directory for clean imports (e.g., `import { Button } from '@/components/common'`).
- **Separation of concerns**: Keep business logic in hooks/utils, UI in components, types in types/, styles in styles/.
- **Scalability**: As the app grows, create subdirectories within each main folder (e.g., `components/dashboard/widgets/`).
- **Testing**: Mirror the src structure in `__tests__/`, placing tests next to their corresponding files.
- **Assets**: Organize assets by type (images/, icons/) and use consistent naming conventions.
- **Types**: Centralize all TypeScript definitions in `types/` for better type management and reuse.

### Migration Path

Current structure can be gradually migrated:
1. Move existing components to appropriate subdirectories
2. Create barrel exports for existing modules
3. Update import paths to use the new structure
4. Add new features following the proposed structure

This structure supports better code organization, easier testing, improved developer experience, and long-term maintainability.